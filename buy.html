<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>VNeeds - Buy</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <!-- Dashboard -->
  <div id="dashboard" class="page active">
    <header>
      <div class="logo">
        <img src="logo.png" alt="VNeeds Logo" class="logo-img">
      </div>

    <div class="search-container">
      <span class="search-icon">🔍</span>
      <input type="text" id="search" placeholder="Search products..." onkeyup="filterProducts()">
    </div>

      <div class="nav-actions">
        <button class="mobile-toggle" onclick="toggleSidebar()">☰</button>
        <a href="sell.html"><button>+ Sell</button></a>
        <button onclick="showPage('wishlistPage')">❤️ Wishlist</button>
        <button id="darkToggle" onclick="toggleDarkMode()">🌙</button>
        <a href="index.html"><button>Logout</button></a>
      </div>
    </header>

    <aside>
      <h3>Categories</h3>
      <ul>
        <li onclick="filterCategory('all')">All</li>
        <li onclick="filterCategory('food')">🍜 Food</li>
        <li onclick="filterCategory('clothes')">👕 Clothes</li>
        <li onclick="filterCategory('cosmetics')">💄 Cosmetics</li>
      </ul>
      <h3>Your Block</h3>
        <ul id="blockCategory"></ul>

      <h3>Price</h3>
      <input type="range" id="priceRange" min="0" max="500" step="10" oninput="filterByPrice()">
      <span id="priceValue">500</span>
    </aside>

    <div id="sidebarOverlay" onclick="closeSidebar()"></div>

    <main id="productList">
      <!-- Products dynamically inserted here -->
    </main>
  </div>

  <!-- Wishlist Page -->
  <div id="wishlistPage" class="page">
    <header>
      <div class="logo"><span style="color:var(--color2)">VNeeds</span></div>
      <div>
        <button onclick="showPage('dashboard')">⬅ Back</button>
        <a href="index.html"><button>Logout</button></a>
      </div>
    </header>
    <h2>Your Wishlist ❤️</h2>
    <div id="wishlistList" class="wishlist-container"></div>
    <div id="wishlistEmpty" style="display:none; margin-top:20px;">
      <p>✨ No items yet. Start exploring products!</p>
    </div>
  </div>

<!-- Product Details Modal -->
<div id="productModal" class="modal" aria-hidden="true" role="dialog">
  <div class="modal-content" role="document">
    <button id="modalCloseBtn" class="close-btn" aria-label="Close modal">×</button>

    <img id="modalImg" alt="Product image">
    <h3 id="modalName"></h3>
    <p id="modalPrice"></p>
    <p id="modalDesc"></p>
    <p id="modalSeller"></p>
    <p id="modalUpi"></p> <!-- ✅ UPI display -->

    <div class="payment-options"> <!-- ✅ Payment buttons -->
      <button id="cashBtn">💵 Cash Payment</button>
      <button id="upiBtn">💸 UPI / Online</button>
    </div>

    <button id="contactSellerBtn" onclick="showToast('📩 Contact Seller feature coming soon!')">
      📩 Contact Seller
    </button>

    <!-- Navigation -->
    <div class="modal-nav">
      <button id="prevBtn">⬅ Prev</button>
      <button id="nextBtn">Next ➡</button>
    </div>
  </div>
</div>


  <!-- Toast Notification -->
  <div id="toastContainer"></div>

  <script src="script.js"></script>
  <script>
    // Load products on page load
    window.onload = () => {
      if (localStorage.getItem("darkMode") === "true") {
        document.body.classList.add("dark");
      }
  
      let userBlock = localStorage.getItem("userBlock");
  
      if (userBlock) {
        // Show block filter in sidebar
        document.getElementById("blockCategory").innerHTML =
          `<li onclick="filterByBlock('${userBlock}')">🏢 ${userBlock}</li>`;
  
        // Auto-load products from their block
        let blockProducts = products.filter(p => p.block === userBlock);
        if (blockProducts.length > 0) {
          loadProducts(blockProducts);
        } else {
          loadProducts(products); // fallback
        }
      } else {
        loadProducts(products);
      }
    }
  </script>
  
</body>
</html>
